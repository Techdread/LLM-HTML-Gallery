<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minesweeper Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #2c3e50;
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        .container {
            width: 90%;
            max-width: 700px;
            background-color: #34495e;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: #ecf0f1;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .difficulty-buttons {
            margin-bottom: 20px;
        }

        .difficulty-button {
            padding: 8px 16px;
            margin: 0 5px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .difficulty-button:hover {
            background-color: #2980b9;
        }

        .difficulty-button.active {
            background-color: #e74c3c;
        }

        .game-board {
            display: grid;
            gap: 5px;
            margin-bottom: 20px;
        }

        .cell {
            width: 40px;
            height: 40px;
            background-color: #7f8c8d;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            user-select: none;
        }

        .cell:hover {
            background-color: #95a5a6;
        }

        .cell.revealed {
            background-color: #ecf0f1;
            color: #2c3e50;
            cursor: default;
        }

        .cell.mine {
            background-color: #e74c3c;
            color: white;
        }

        .cell.mine-revealed {
            background-color: #e74c3c;
            color: white;
            font-size: 20px;
        }

        .cell.flagged {
            background-color: #f1c40f;
            cursor: default;
        }

        .cell.flagged:hover {
            background-color: #f39c12;
        }

        .message {
            margin-top: 20px;
            font-size: 18px;
        }

        .reset-button {
            padding: 10px 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }

        .reset-button:hover {
            background-color: #c0392b;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Minesweeper</h1>

        <div class="difficulty-buttons">
            <button class="difficulty-button active" data-difficulty="easy"
                onclick="setDifficulty('easy')">Easy</button>
            <button class="difficulty-button" data-difficulty="medium" onclick="setDifficulty('medium')">Medium</button>
            <button class="difficulty-button" data-difficulty="hard" onclick="setDifficulty('hard')">Hard</button>
        </div>

        <div id="game-board" class="game-board"></div>
        <button class="reset-button" onclick="resetGame()">Reset Game</button>
        <div id="message" class="message"></div>

        <script>
            const difficulties = {
                easy: { rows: 9, cols: 9, numMines: 10 },
                medium: { rows: 16, cols: 16, numMines: 40 },
                hard: { rows: 30, cols: 16, numMines: 99 }
            };

            let currentDifficulty = 'easy';
            let board = [];
            let revealedCells = 0;
            let gameOver = false;

            function setDifficulty(difficulty) {
                // Remove active class from all buttons
                document.querySelectorAll('.difficulty-button').forEach(btn => {
                    btn.classList.remove('active');
                });

                // Add active class to selected button
                const selectedButton = document.querySelector(`.difficulty-button[data-difficulty="${difficulty}"]`);
                if (selectedButton) {
                    selectedButton.classList.add('active');
                }

                currentDifficulty = difficulty;
                resetGame();
            }

            function createBoard() {
                // Create the board with cells
                const gameBoard = document.getElementById('game-board');
                gameBoard.innerHTML = '';
                const { rows, cols } = difficulties[currentDifficulty];

                // Set grid template based on difficulty
                gameBoard.style.gridTemplateColumns = `repeat(${cols}, 40px)`;

                for (let r = 0; r < rows; r++) {
                    board[r] = [];
                    for (let c = 0; c < cols; c++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.row = r;
                        cell.dataset.col = c;
                        cell.addEventListener('click', handleCellClick);
                        cell.addEventListener('contextmenu', handleRightClick);

                        board[r][c] = {
                            element: cell,
                            hasMine: false,
                            revealed: false,
                            flagged: false,
                            adjacentMines: 0
                        };

                        gameBoard.appendChild(cell);
                    }
                }

                // Place mines randomly
                let minesPlaced = 0;
                const { numMines } = difficulties[currentDifficulty];
                while (minesPlaced < numMines) {
                    const r = Math.floor(Math.random() * rows);
                    const c = Math.floor(Math.random() * cols);

                    if (!board[r][c].hasMine) {
                        board[r][c].hasMine = true;
                        minesPlaced++;

                        // Update adjacent cells' mine count
                        for (let dr = -1; dr <= 1; dr++) {
                            for (let dc = -1; dc <= 1; dc++) {
                                const nr = r + dr;
                                const nc = c + dc;

                                if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
                                    board[nr][nc].adjacentMines++;
                                }
                            }
                        }
                    }
                }
            }

            function handleCellClick(event) {
                if (gameOver) return;

                const cell = event.target;
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);

                if (board[row][col].flagged || board[row][col].revealed) return;

                revealCell(row, col);

                if (board[row][col].hasMine) {
                    gameOver = true;
                    showMessage('Game Over! You hit a mine.');
                    revealAllMines();
                } else if (checkWinCondition()) {
                    gameOver = true;
                    showMessage('Congratulations! You won!');
                }
            }

            function handleRightClick(event) {
                event.preventDefault();

                const cell = event.target;
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);

                if (board[row][col].revealed) return;

                board[row][col].flagged = !board[row][col].flagged;
                updateCellDisplay(row, col);
            }

            function revealCell(row, col) {
                if (board[row][col].revealed || board[row][col].flagged) return;

                board[row][col].revealed = true;
                revealedCells++;
                updateCellDisplay(row, col);

                if (board[row][col].adjacentMines === 0) {
                    // Auto-reveal adjacent cells
                    for (let dr = -1; dr <= 1; dr++) {
                        for (let dc = -1; dc <= 1; dc++) {
                            const nr = row + dr;
                            const nc = col + dc;

                            if (nr >= 0 && nr < board.length && nc >= 0 && nc < board[0].length) {
                                revealCell(nr, nc);
                            }
                        }
                    }
                }
            }

            function updateCellDisplay(row, col) {
                const cell = board[row][col].element;
                const content = board[row][col];

                if (content.flagged) {
                    cell.classList.add('flagged');
                    cell.textContent = 'âš‘';
                } else if (content.revealed) {
                    cell.classList.add('revealed');

                    if (content.hasMine) {
                        cell.classList.add('mine-revealed');
                        cell.textContent = 'ðŸ’£';
                    } else {
                        cell.textContent = content.adjacentMines > 0 ? content.adjacentMines : '';
                    }
                } else {
                    cell.classList.remove('flagged', 'revealed', 'mine-revealed');
                    cell.textContent = '';
                }
            }

            function revealAllMines() {
                for (let r = 0; r < board.length; r++) {
                    for (let c = 0; c < board[0].length; c++) {
                        if (board[r][c].hasMine && !board[r][c].revealed) {
                            board[r][c].revealed = true;
                            updateCellDisplay(r, c);
                        }
                    }
                }
            }

            function checkWinCondition() {
                const { rows, cols, numMines } = difficulties[currentDifficulty];
                return revealedCells === (rows * cols - numMines);
            }

            function showMessage(text) {
                const messageElement = document.getElementById('message');
                messageElement.textContent = text;
            }

            function resetGame() {
                gameOver = false;
                revealedCells = 0;
                createBoard();
                showMessage('');
            }

            // Initialize the game
            window.onload = function () {
                setDifficulty(currentDifficulty);
            };
        </script>
    </div>
</body>

</html>